<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%
String contextPath = request.getContextPath();
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="shortcut icon" type="image/x-icon"
	href="http://localhost/jspPro/images/SiSt.ico">
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script> -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="google" content="notranslate">
<link rel="stylesheet"
	href="http://localhost/jspPro/resources/cdn-main/example.css">
<script src="http://localhost/jspPro/resources/cdn-main/example.js"></script>
<style>
span.material-symbols-outlined {
	vertical-align: text-bottom;
}
</style>
<link rel="stylesheet"
	href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet"
	href="https://www.jquery.com/resources/demos/style.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>
	<header>
		<h1 class="main">
			<a href="#" style="position: absolute; top: 30px;">dkrkdfla HOme</a>
		</h1>
		<ul>
			<li><a href="#">로그인</a></li>
			<li><a href="#">회원가입</a></li>
		</ul>
	</header>
	<div>
		<xmp class="code"> view.jsp </xmp>

		<h2>내용 보기</h2>

		<table>
			<tbody>
				<tr>
					<td>이름</td>
					<td>${ dto.writer }</td>
					<td>등록일</td>
					<td>${ dto.writedate }</td>
				</tr>
				<tr>
					<td>Email</td>
					<td>${ dto.email }</td>
					<td>조회수</td>
					<td>${ dto.readed }</td>
				</tr>
				<tr>
					<td>제목</td>
					<td colspan="3">${ dto.title }</td>
				</tr>
				<tr>
					<td colspan="4" class="full"
						style="height: 200px; vertical-align: top">${ dto.content }</td>
				</tr>
			</tbody>
			<tfoot>
				<tr>
					<td colspan="4" align="center">
						<a href="<%= contextPath %>/cstvsboard/edit.htm?seq=${dto.seq }">수정하기</a>
						<a href="<%= contextPath %>/cstvsboard/delete.htm?seq=${dto.seq }">삭제하기</a>
						<a href="#" id="homeLink">HOme</a>
						<input type="button" id="btnModalDelete" value="모달창 삭제">
						</td>
						
				</tr>
			</tfoot>
		</table>

	</div>

	<div id="dialog-form" title="삭제 모달창">
		<h2>삭제하기</h2>
		<form method="post" action="<%= contextPath %>/cstvsboard/delete.htm?seq=${param.seq}">
			<table>
				<tr>
					<td colspan="2" align="center"><b>글을 삭제합니다.</b></td>
				</tr>
				<tr>
					<td>비밀번호</td>
					<td><input type="password" name="pwd" size="15"
						autofocus="autofocus"></td>
				</tr>
				<tr>
					<td colspan="2" align="center">
						<input type="submit" value="삭제">
						&nbsp;&nbsp; 
						<input type="button" value="취소" id="cancel">
					</td>
				</tr>
			</table>
			<span style="color:red;display: none" id="spn">비밀번호가 잘못되었습니다.</span>
		</form>
	</div>

<script>
	let dialog, form;
	
    dialog = $( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 400,
        width: 350,
        modal: true,
        buttons: {
        },
        close: function() {
          form[ 0 ].reset();
        }
      });
   
      form = dialog.find( "form" );
   
      $( "#btnModalDelete" ).button().on( "click", function() {
        dialog.dialog( "open" );
      });
      
      $("#cancel").on("click", function () {
		dialog.dialog("close")
	});

</script>

<script type="text/javascript">
	if (${param.delete eq 'fail'}) {
		dialog.dialog("open");
		$("#spn").show().slideToggle(3000);
	}
</script>
<script>
    $(document).ready(function() {
        // "HOme" 링크에 대한 클릭 이벤트 핸들러 설정
        $("#homeLink").on("click", function(event) {
            event.preventDefault(); // 기본 링크 이동 동작을 막습니다.

            // 검색 조건 및 검색어를 가져오기
            let searchCondition = $("#searchCondition").val();
            let searchWord = $("#searchWord").val();

            // 필요한 경우, 값이 없을 때 기본값 설정
            if (!searchCondition) searchCondition = '';
            if (!searchWord) searchWord = '';

            // 페이지당 게시물 수와 현재 페이지 설정
            let currentPage = 1; // 처음 페이지로 돌아가므로 기본값을 1로 설정
            let numberPerPage = 10; // 페이지당 표시할 게시물 수

            // URL 생성 (문자열 연결을 통해 안전하게 구성)
            let newUrl = "/jspPro/cstvsboard/list.htm?currentPage=" + currentPage +
                         "&numberPerPage=" + numberPerPage +
                         "&searchCondition=" + encodeURIComponent(searchCondition) +
                         "&searchWord=" + encodeURIComponent(searchWord);

            // 새 URL로 이동
            window.location.href = newUrl;
        });
    });
</script>


</body>
</html>